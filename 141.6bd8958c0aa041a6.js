"use strict";(self.webpackChunkhedge_accounting_sfx=self.webpackChunkhedge_accounting_sfx||[]).push([[141],{3141:(S,E,c)=>{c.r(E),c.d(E,{PromptTemplatesComponent:()=>I});var f=c(467),F=c(177),h=c(1141),M=c(2242),x=c(8833),T=c(1570),e=c(4438);let l=(()=>{class g{static \u0275fac=function(r){return new(r||g)};static \u0275mod=e.$C({type:g});static \u0275inj=e.G2t({imports:[F.MD]})}return g})();var i=c(4341),o=c(9641),u=c(4885),m=c(5779);const y=()=>({width:"100vw",height:"90vh","border-top-left-radius":"16px","border-top-right-radius":"16px","max-width":"100vw","max-height":"90vh"}),C=()=>({width:"100%"}),_=()=>({label:"Active",value:"active"}),d=()=>({label:"Inactive",value:"inactive"}),v=(g,w)=>[g,w];function R(g,w){if(1&g){const a=e.RV6();e.j41(0,"button",39),e.bIt("click",function(){const t=e.eBV(a).$implicit,p=e.XpG();return e.Njj(p.onFamilyTabChange(t.value))}),e.EFF(1),e.k0s()}if(2&g){const a=w.$implicit,r=e.XpG();e.AVh("bg-blue-600",r.selectedFamilyType===a.value)("text-white",r.selectedFamilyType===a.value)("border-blue-600",r.selectedFamilyType===a.value)("bg-white",r.selectedFamilyType!==a.value)("text-gray-700",r.selectedFamilyType!==a.value)("border-gray-300",r.selectedFamilyType!==a.value),e.R7$(),e.JRh(a.label)}}function k(g,w){if(1&g){const a=e.RV6();e.j41(0,"div",40)(1,"button",41),e.bIt("click",function(){e.eBV(a);const t=e.XpG();return e.Njj(t.showSheet=!1)}),e.EFF(2,"Cancel"),e.k0s(),e.j41(3,"button",42),e.bIt("click",function(){e.eBV(a);const t=e.XpG();return e.Njj(t.confirmSave())}),e.EFF(4),e.k0s()()}if(2&g){const a=e.XpG();e.R7$(4),e.JRh("edit"===a.mode?"Update Template":"Save Template")}}let I=(()=>{class g{constructor(a,r){this.ngZone=a,this.promptTemplatesService=r,this.defaultColDef={resizable:!0,sortable:!0,filter:"agSetColumnFilter",minWidth:100},this.templates=[],this.filteredTemplates=[],this.search="",this.selectedFamilyType="",this.showSheet=!1,this.mode="add",this.form={},this.placeholderText="Enter your prompt template here...\n\n\u{1f4dd} TEMPLATE PATTERN: Use {{field_name}} for input fields\n\n\u2705 RECOMMENDED EXAMPLES:\n\nRisk Management:\nCalculate VaR for {{portfolio_name}} with {{confidence_level}}% confidence over {{time_horizon}} days using {{methodology}} method.\n\nHedge Analysis:\nAnalyze {{hedge_type}} effectiveness for {{entity}} covering {{currency}} exposure of {{amount}} from {{start_date}} to {{end_date}}.\n\nCompliance Check:\nReview {{regulation_type}} compliance for {{business_line}} with threshold {{threshold_amount}} in {{base_currency}}.\n\n\u{1f527} FIELD NAMING BEST PRACTICES:\n\u2022 Use lowercase with underscores: {{field_name}}\n\u2022 Common fields: {{entity}}, {{currency}}, {{amount}}, {{date}}\n\u2022 Descriptive names: {{start_date}}, {{end_date}}, {{risk_type}}\n\n\u{1f4a1} FIELD TYPES SUPPORTED:\n\u2022 Text: {{entity}}, {{currency}}, {{description}}\n\u2022 Numbers: {{amount}}, {{rate}}, {{percentage}}  \n\u2022 Dates: {{date}}, {{maturity_date}}\n\nInput fields will be automatically created from {{field_name}} patterns.",this.familyTypeOptions=[],this.templateCategoryOptions=[],this.columnDefs=[{field:"family_type",headerName:"Family Type",width:160,sortable:!0},{field:"template_category",headerName:"Category",width:160,sortable:!0},{field:"name",headerName:"Template Name",width:220,sortable:!0},{field:"prompt_text",headerName:"Prompt Text",flex:1,sortable:!0},{field:"usage_count",headerName:"Usage",width:100,sortable:!0,cellClass:"text-center"},{field:"status",headerName:"Status",width:100,cellRenderer:t=>{const p="active"===t.value?"Active":"Inactive",n="Active"===p?"bg-green-100 text-green-800":"bg-red-100 text-red-800",b=document.createElement("span");return b.className=`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${n}`,b.textContent=p,b}},{field:"created_at",headerName:"Created",width:140,sortable:!0},{field:"updated_at",headerName:"Updated",width:140,sortable:!0},{headerName:"Actions",width:120,pinned:"right",cellRenderer:t=>{const p=document.createElement("div");p.className="flex items-center justify-center space-x-2";const n=document.createElement("button");n.className="text-gray-500 hover:text-blue-600 p-1",n.title="Edit Template",n.innerHTML='<i class="pi pi-pencil text-sm"></i>',n.addEventListener("click",()=>t.context.componentParent.editRow(t.data));const b=document.createElement("button");return b.className="text-gray-500 hover:text-red-600 p-1",b.title="Delete Template",b.innerHTML='<i class="pi pi-trash text-sm"></i>',b.addEventListener("click",()=>t.context.componentParent.deleteRow(t.data)),p.appendChild(n),p.appendChild(b),p}}],this.gridOptions={pagination:!0,paginationPageSize:20,animateRows:!0,context:{componentParent:this}}}ngOnInit(){var a=this;return(0,f.A)(function*(){a.familyTypeOptions=[{label:"All Types",value:""}],a.selectedFamilyType="",a.templateSub=a.promptTemplatesService.templates$.subscribe(r=>{a.templates=r,a.applyFilters(),setTimeout(()=>a.gridApi?.sizeColumnsToFit(),0)}),a.loadFamilyTypes().catch(r=>{console.error("Failed to load family types:",r)})})()}loadFamilyTypes(){var a=this;return(0,f.A)(function*(){try{const r=yield a.promptTemplatesService.getUniqueFamilyTypes();a.familyTypeOptions=[{label:"All Types",value:""},...r]}catch(r){console.error("Error loading family types:",r),a.familyTypeOptions=[{label:"All Types",value:""},{label:"Hedge Accounting",value:"hedge_accounting"},{label:"Risk Management",value:"risk_management"},{label:"Compliance",value:"compliance"}]}})()}onFamilyTypeChange(a){var r=this;return(0,f.A)(function*(){const t=a.value;if(t)try{r.templateCategoryOptions=yield r.promptTemplatesService.getTemplateCategoriesByFamily(t),r.form.template_category=""}catch(p){console.error("Error loading template categories:",p),r.templateCategoryOptions=[]}else r.templateCategoryOptions=[],r.form.template_category=""})()}ngOnDestroy(){this.templateSub&&this.templateSub.unsubscribe()}onGridReady(a){this.gridApi=a.api,a.api.sizeColumnsToFit(),this.applyFilters()}onSearchChange(a){this.search=a,this.searchTimer&&clearTimeout(this.searchTimer),this.searchTimer=setTimeout(()=>this.applyFilters(),300)}onFilterChange(){this.applyFilters()}onFamilyTabChange(a){this.selectedFamilyType=a,this.applyFilters()}applyFilters(){let a=this.templates;if(this.search.trim()){const r=this.search.trim().toLowerCase();a=a.filter(t=>t.name?.toLowerCase().includes(r)||t.prompt_text?.toLowerCase().includes(r)||t.family_type?.toLowerCase().includes(r)||t.template_category?.toLowerCase().includes(r))}this.selectedFamilyType&&""!==this.selectedFamilyType&&(a=a.filter(r=>r.family_type===this.selectedFamilyType)),this.filteredTemplates=a,setTimeout(()=>this.gridApi?.sizeColumnsToFit(),0)}openAdd(){this.mode="add",this.form={status:"active",usage_count:0,display_order:1},this.ngZone.run(()=>this.showSheet=!0)}editRow(a){var r=this;return(0,f.A)(function*(){if(r.mode="edit",r.form={...a},a.family_type)try{r.templateCategoryOptions=yield r.promptTemplatesService.getTemplateCategoriesByFamily(a.family_type)}catch(t){console.error("Error loading template categories for edit:",t)}r.ngZone.run(()=>r.showSheet=!0)})()}deleteRow(a){confirm("Are you sure you want to delete this template?")&&this.promptTemplatesService.deleteTemplate(a.id)}confirmSave(){var a=this;return(0,f.A)(function*(){"edit"===a.mode&&a.form.id?yield a.promptTemplatesService.updateTemplate(a.form.id,a.form):yield a.promptTemplatesService.addTemplate(a.form),a.showSheet=!1,a.mode="add",a.form={}})()}static{this.\u0275fac=function(r){return new(r||g)(e.rXU(e.SKi),e.rXU(u.r))}}static{this.\u0275cmp=e.VBU({type:g,selectors:[["app-prompt-templates"]],standalone:!0,features:[e.aNF],decls:92,vars:46,consts:[[1,"p-6"],[1,"mb-6"],[1,"text-xl","font-semibold","text-gray-900","mb-2"],[1,"text-gray-600"],[1,"mb-3","overflow-x-auto"],[1,"flex","gap-2"],["class","px-3 py-1.5 rounded-full border text-sm whitespace-nowrap",3,"bg-blue-600","text-white","border-blue-600","bg-white","text-gray-700","border-gray-300","click",4,"ngFor","ngForOf"],[1,"flex","items-center","gap-4","mb-4"],[1,"flex-1","flex","items-center","gap-2"],[1,"filter-label"],["type","text","placeholder","Search templates...",1,"filter-input","flex-1","max-w-xs",3,"ngModelChange","ngModel"],[1,"btn","btn-primary","ml-auto",3,"click"],[1,"pi","pi-plus"],[1,"bg-white","rounded-lg","shadow-sm","border","border-gray-200"],[1,"ag-theme-alpine","w-full",2,"height","600px",3,"gridReady","columnDefs","rowData","defaultColDef","gridOptions"],["styleClass","entity-dialog entity-dialog-full",3,"visibleChange","header","visible","modal","closable"],[1,"space-y-6","p-2"],[1,"rounded-lg","border","border-gray-200","p-4","bg-white"],[1,"grid","grid-cols-12","gap-4"],[1,"col-span-12","md:col-span-3","flex","items-center"],[1,"text-sm","font-semibold","text-gray-700"],[1,"col-span-12","md:col-span-9"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],[1,"field"],[1,"block","text-sm","font-medium","text-gray-700","mb-1"],["type","text","name","name","placeholder","Enter template name",1,"filter-input","w-full",3,"ngModelChange","ngModel"],["name","family_type","placeholder","Select family type","optionLabel","label","optionValue","value","styleClass","filter-input",1,"w-full",3,"ngModelChange","onChange","options","ngModel"],["name","template_category","placeholder","Select category","optionLabel","label","optionValue","value","styleClass","filter-input",1,"w-full",3,"ngModelChange","options","ngModel","disabled"],["name","status","placeholder","Select status","optionLabel","label","optionValue","value","styleClass","filter-input",1,"w-full",3,"ngModelChange","options","ngModel"],[1,"col-span-12","md:col-span-3","flex","items-start"],[1,"space-y-4"],["rows","3","name","description","placeholder","Enter template description",1,"filter-input","w-full",3,"ngModelChange","ngModel"],[1,"text-xs","text-gray-500","mb-2"],["rows","8","name","prompt_text",1,"filter-input","w-full","font-mono","text-sm",3,"ngModelChange","ngModel","placeholder"],[1,"text-xs","text-gray-500","mt-1"],["type","text","name","template_filters","placeholder","Enter comma-separated filters (e.g., hedge, swap, options)",1,"filter-input","w-full",3,"ngModelChange","ngModel"],["type","number","name","display_order","placeholder","Enter display order",1,"filter-input","w-full",3,"ngModelChange","ngModel"],["type","number","name","usage_count","readonly","",1,"filter-input","w-full",3,"ngModelChange","ngModel"],["pTemplate","footer"],[1,"px-3","py-1.5","rounded-full","border","text-sm","whitespace-nowrap",3,"click"],[1,"flex","justify-end","space-x-3","pt-4","border-t","border-gray-200"],[1,"btn","btn-secondary",3,"click"],[1,"btn","btn-primary",3,"click"]],template:function(r,t){1&r&&(e.j41(0,"div",0)(1,"div",1)(2,"h2",2),e.EFF(3,"Prompt Templates Configuration"),e.k0s(),e.j41(4,"p",3),e.EFF(5,"Manage and configure prompt templates for HAWK Agent Template Mode"),e.k0s()(),e.j41(6,"div",4)(7,"div",5),e.DNE(8,R,2,13,"button",6),e.k0s()(),e.j41(9,"div",7)(10,"div",8)(11,"label",9),e.EFF(12,"Search:"),e.k0s(),e.j41(13,"input",10),e.mxI("ngModelChange",function(n){return e.DH7(t.search,n)||(t.search=n),n}),e.bIt("ngModelChange",function(n){return t.onSearchChange(n)}),e.k0s()(),e.j41(14,"button",11),e.bIt("click",function(){return t.openAdd()}),e.nrm(15,"i",12),e.j41(16,"span"),e.EFF(17,"Add Template"),e.k0s()()(),e.j41(18,"div",13)(19,"ag-grid-angular",14),e.bIt("gridReady",function(n){return t.onGridReady(n)}),e.k0s()(),e.j41(20,"p-dialog",15),e.mxI("visibleChange",function(n){return e.DH7(t.showSheet,n)||(t.showSheet=n),n}),e.j41(21,"form",16)(22,"div",17)(23,"div",18)(24,"div",19)(25,"div",20),e.EFF(26,"Basic Information"),e.k0s()(),e.j41(27,"div",21)(28,"div",22)(29,"div",23)(30,"label",24),e.EFF(31,"Template Name"),e.k0s(),e.j41(32,"input",25),e.mxI("ngModelChange",function(n){return e.DH7(t.form.name,n)||(t.form.name=n),n}),e.k0s()(),e.j41(33,"div",23)(34,"label",24),e.EFF(35,"Family Type"),e.k0s(),e.j41(36,"p-dropdown",26),e.mxI("ngModelChange",function(n){return e.DH7(t.form.family_type,n)||(t.form.family_type=n),n}),e.bIt("onChange",function(n){return t.onFamilyTypeChange(n)}),e.k0s()(),e.j41(37,"div",23)(38,"label",24),e.EFF(39,"Template Category"),e.k0s(),e.j41(40,"p-dropdown",27),e.mxI("ngModelChange",function(n){return e.DH7(t.form.template_category,n)||(t.form.template_category=n),n}),e.k0s()(),e.j41(41,"div",23)(42,"label",24),e.EFF(43,"Status"),e.k0s(),e.j41(44,"p-dropdown",28),e.mxI("ngModelChange",function(n){return e.DH7(t.form.status,n)||(t.form.status=n),n}),e.k0s()()()()()(),e.j41(45,"div",17)(46,"div",18)(47,"div",29)(48,"div",20),e.EFF(49,"Template Content"),e.k0s()(),e.j41(50,"div",21)(51,"div",30)(52,"div",23)(53,"label",24),e.EFF(54,"Description"),e.k0s(),e.j41(55,"textarea",31),e.mxI("ngModelChange",function(n){return e.DH7(t.form.description,n)||(t.form.description=n),n}),e.k0s()(),e.j41(56,"div",23)(57,"label",24),e.EFF(58,"Prompt Text"),e.k0s(),e.j41(59,"div",32),e.EFF(60),e.k0s(),e.j41(61,"textarea",33),e.mxI("ngModelChange",function(n){return e.DH7(t.form.prompt_text,n)||(t.form.prompt_text=n),n}),e.k0s(),e.j41(62,"div",34)(63,"strong"),e.EFF(64,"Example:"),e.k0s(),e.nrm(65,"br"),e.EFF(66),e.nrm(67,"br"),e.j41(68,"em"),e.EFF(69,"This will create input fields for: transaction_type, entity_name, amount, and currency"),e.k0s()()(),e.j41(70,"div",23)(71,"label",24),e.EFF(72,"Template Filters"),e.k0s(),e.j41(73,"input",35),e.mxI("ngModelChange",function(n){return e.DH7(t.form.template_filters,n)||(t.form.template_filters=n),n}),e.k0s(),e.j41(74,"div",34),e.EFF(75,"Add filters to help users find this template easily"),e.k0s()()()()()(),e.j41(76,"div",17)(77,"div",18)(78,"div",19)(79,"div",20),e.EFF(80,"Metadata"),e.k0s()(),e.j41(81,"div",21)(82,"div",22)(83,"div",23)(84,"label",24),e.EFF(85,"Display Order"),e.k0s(),e.j41(86,"input",36),e.mxI("ngModelChange",function(n){return e.DH7(t.form.display_order,n)||(t.form.display_order=n),n}),e.k0s()(),e.j41(87,"div",23)(88,"label",24),e.EFF(89,"Usage Count"),e.k0s(),e.j41(90,"input",37),e.mxI("ngModelChange",function(n){return e.DH7(t.form.usage_count,n)||(t.form.usage_count=n),n}),e.k0s()()()()()()(),e.DNE(91,k,5,1,"ng-template",38),e.k0s()()),2&r&&(e.R7$(8),e.Y8G("ngForOf",t.familyTypeOptions),e.R7$(5),e.R50("ngModel",t.search),e.R7$(6),e.Y8G("columnDefs",t.columnDefs)("rowData",t.filteredTemplates)("defaultColDef",t.defaultColDef)("gridOptions",t.gridOptions),e.R7$(),e.Aen(e.lJ4(37,y)),e.FS9("header","edit"===t.mode?"Edit Template":"Add Template"),e.R50("visible",t.showSheet),e.Y8G("modal",!0)("closable",!0),e.R7$(12),e.R50("ngModel",t.form.name),e.R7$(4),e.Aen(e.lJ4(38,C)),e.Y8G("options",t.familyTypeOptions),e.R50("ngModel",t.form.family_type),e.R7$(4),e.Aen(e.lJ4(39,C)),e.Y8G("options",t.templateCategoryOptions),e.R50("ngModel",t.form.template_category),e.Y8G("disabled",!t.form.family_type),e.R7$(4),e.Aen(e.lJ4(40,C)),e.Y8G("options",e.l_i(43,v,e.lJ4(41,_),e.lJ4(42,d))),e.R50("ngModel",t.form.status),e.R7$(11),e.R50("ngModel",t.form.description),e.R7$(5),e.SpI("Use ","{{input_field_name}}"," to create dynamic input fields for users"),e.R7$(),e.R50("ngModel",t.form.prompt_text),e.Y8G("placeholder",t.placeholderText),e.R7$(5),e.LHq(" Analyze the ","{{transaction_type}}"," for ","{{entity_name}}"," with amount ","{{amount}}"," in ","{{currency}}",""),e.R7$(7),e.R50("ngModel",t.form.template_filters),e.R7$(13),e.R50("ngModel",t.form.display_order),e.R7$(4),e.R50("ngModel",t.form.usage_count))},dependencies:[F.MD,F.Sq,h.tm,m.Ei,o.xs,M.u,x.kr,x.ms,T.P,T.l,l,i.YN,i.qT,i.me,i.Q0,i.BC,i.cb,i.vS,i.cV],encapsulation:2})}}return g})()},4885:(S,E,c)=>{c.d(E,{r:()=>x});var f=c(467),F=c(4412),h=c(7129),M=c(4438);let x=(()=>{class T{constructor(){this.templatesSubject=new F.t([]),this.templates$=this.templatesSubject.asObservable(),this.loadTemplates()}loadTemplates(){var s=this;return(0,f.A)(function*(){try{const l=(0,h.b)(),{data:i,error:o}=yield l.from("prompt_templates").select("*").order("display_order",{ascending:!0});if(o)throw o;s.templatesSubject.next(i||[])}catch(l){console.error("Error loading prompt templates:",l),console.warn("Loading fallback templates..."),s.templatesSubject.next(s.getFallbackTemplates())}})()}getFallbackTemplates(){return[{id:"fallback-1",name:"Hedge Analysis Template",family_type:"hedge_accounting",template_category:"analysis",description:"Basic hedge analysis template",prompt_text:"Analyze {{hedge_type}} effectiveness for {{entity}} covering {{currency}} exposure of {{amount}}.",input_fields:["hedge_type","entity","currency","amount"],status:"active",display_order:1},{id:"fallback-2",name:"Risk Assessment Template",family_type:"risk_management",template_category:"assessment",description:"Basic risk assessment template",prompt_text:"Assess {{risk_type}} risk for {{portfolio}} with exposure {{amount}} in {{currency}}.",input_fields:["risk_type","portfolio","amount","currency"],status:"active",display_order:2}]}addTemplate(s){var l=this;return(0,f.A)(function*(){try{const i=(0,h.b)(),o=l.extractInputFields(s.prompt_text||""),{error:u}=yield i.from("prompt_templates").insert([{...s,input_fields:o,created_at:(new Date).toISOString(),updated_at:(new Date).toISOString(),created_by:"current_user",updated_by:"current_user"}]);if(u)throw u;yield l.loadTemplates()}catch(i){throw console.error("Error adding template:",i),i}})()}updateTemplate(s,l){var i=this;return(0,f.A)(function*(){try{const o=(0,h.b)(),u=i.extractInputFields(l.prompt_text||""),{error:m}=yield o.from("prompt_templates").update({...l,input_fields:u,updated_at:(new Date).toISOString(),updated_by:"current_user"}).eq("id",s);if(m)throw m;yield i.loadTemplates()}catch(o){throw console.error("Error updating template:",o),o}})()}deleteTemplate(s){var l=this;return(0,f.A)(function*(){try{const i=(0,h.b)(),{error:o}=yield i.from("prompt_templates").delete().eq("id",s);if(o)throw o;yield l.loadTemplates()}catch(i){throw console.error("Error deleting template:",i),i}})()}incrementUsageCount(s){var l=this;return(0,f.A)(function*(){try{const i=(0,h.b)(),{error:o}=yield i.rpc("increment_template_usage",{template_id:s});if(o)throw o;yield l.loadTemplates()}catch(i){console.error("Error incrementing usage count:",i)}})()}getTemplatesByFamilyType(s){return(0,f.A)(function*(){try{const l=(0,h.b)(),{data:i,error:o}=yield l.from("prompt_templates").select("*").eq("family_type",s).eq("status","active").order("display_order",{ascending:!0});if(o)throw o;return i||[]}catch(l){return console.error("Error getting templates by family type:",l),[]}})()}searchTemplates(s,l){return(0,f.A)(function*(){try{let o=(0,h.b)().from("prompt_templates").select("*").eq("status","active");l&&(o=o.eq("family_type",l)),s&&(o=o.or(`name.ilike.%${s}%,description.ilike.%${s}%,template_filters.ilike.%${s}%`));const{data:u,error:m}=yield o.order("display_order",{ascending:!0});if(m)throw m;return u||[]}catch(i){return console.error("Error searching templates:",i),[]}})()}extractInputFields(s){const l=[],i=new Set;let o;const u=_=>_.trim().toLowerCase().replace(/\s+/g," "),m=/\{\{([^}]+)\}\}/g;for(;null!==(o=m.exec(s));){const d=(o[1]||"").trim().split("|")[0].trim(),v=u(d);v&&!i.has(v)&&(i.add(v),l.push(d))}const y=/\[([^\]]+)\]/g;for(;null!==(o=y.exec(s));){const _=(o[1]||"").trim(),d=u(_);d&&!i.has(d)&&(i.add(d),l.push(_))}return l.filter(_=>{const d=(_||"").trim();return!(!d||d.length>80||d.includes("\n")||d.includes("|")||d.includes("<")||d.includes(">")||d.startsWith("http")||d.split(/\s+/).filter(Boolean).length>6||!/[a-zA-Z]/.test(d))})}getInputFields(s){return this.extractInputFields(s)}fillTemplate(s,l){const i=m=>m.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");let o=s;const u=l||{};for(const m of Object.keys(u)){const y=u[m]??`{{${m}}}`,C=Array.from(new Set([String(m),String(m).trim(),String(m).replace(/\s+/g,"_"),String(m).replace(/_/g," ")]));for(const _ of C){const d=i(_),v=new RegExp(`\\{\\{\\s*${d}(?:[^}]*)\\}\\}`,"gi"),R=new RegExp(`\\[\\s*${d}\\s*\\]`,"gi");o=o.replace(v,y).replace(R,y)}}return o}getUniqueFamilyTypes(){var s=this;return(0,f.A)(function*(){try{const l=(0,h.b)(),{data:i,error:o}=yield l.from("prompt_templates").select("family_type").eq("status","active");if(o)throw o;return[...new Set((i||[]).map(m=>m.family_type))].map(m=>({label:s.formatFamilyLabel(m),value:m}))}catch(l){return console.error("Error getting unique family types:",l),[]}})()}getTemplateCategoriesByFamily(s){var l=this;return(0,f.A)(function*(){try{const i=(0,h.b)(),{data:o,error:u}=yield i.from("prompt_templates").select("template_category").eq("family_type",s).eq("status","active");if(u)throw u;return[...new Set((o||[]).map(y=>y.template_category))].map(y=>({label:l.formatCategoryLabel(y),value:y}))}catch(i){return console.error("Error getting template categories:",i),[]}})()}formatFamilyLabel(s){return{hedge_accounting:"Hedge Accounting",risk_management:"Risk Management",compliance:"Compliance",reporting:"Reporting",analysis:"Analysis",operations:"Operations"}[s]||this.formatCategoryLabel(s)}formatCategoryLabel(s){return s.replace(/_/g," ").replace(/\b\w/g,l=>l.toUpperCase())}static{this.\u0275fac=function(l){return new(l||T)}}static{this.\u0275prov=M.jDH({token:T,factory:T.\u0275fac,providedIn:"root"})}}return T})()}}]);